## 1. Introducción y Fundamentos Arquitectónicos

<!-- row -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-cyan-400 mb-3","children":[{"i":{"class":"fas fa-code mr-2"}},"Filosofía Declarativa"]}}} -->
FluidUI reemplaza la manipulación imperativa del DOM y las hojas de estilo estáticas por un enfoque basado en funciones. Los estilos son objetos de primera clase en JavaScript, permitiendo el uso de variables, lógica y matemáticas directamente en la definición de la interfaz.
<!-- card:end -->

<!-- col -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-blue-400 mb-3","children":[{"i":{"class":"fas fa-ruler-combined mr-2"}},"Fluidez Matemática"]}}} -->
El núcleo de FluidUI es la interpolación. En lugar de puntos de ruptura rígidos (breakpoints), utilizamos funciones como <code>clampwcss</code> para interpolar valores suavemente entre un ancho mínimo y máximo de ventana, creando diseños verdaderamente fluidos.
<!-- card:end -->
<!-- row:end -->

### ¿Por qué usar FluidUI?

FluidUI combina la potencia de la manipulación del DOM estilo jQuery con un motor de CSS reactivo. Permite definir interfaces que se adaptan matemáticamente al viewport del usuario, eliminando gran parte de la necesidad de media queries tradicionales.

#### Ejemplos Rápidos

<!-- tabs:start -->

#### **Componente (element)**

```javascript
    /** Creación fluida de componentes */
    element("#app")
        .style($ => ({
            display: $.flex,
            justifyContent: $.center,
            alignItems: $.center,
            height: "100vh",
            fontSize: $.clampwcss(16, 24) /** Fluido de 16px a 24px */
        }))
        .text("¡Hola Mundo Fluido!")
```

#### **Estilos Globales (insertStyle)**

```javascript
    /** Inyección de estilos globales con buildStyle */
    insertStyle({
        id: "global-theme",
        css: buildStyle($ => ({
            ":root": {fontFamily: "Inter, sans-serif"},
            body: {backgroundColor: "#0f172a", color: "#f8fafc", margin: 0},
            ".btn": {
                background: $.linearGradient("45deg", "#3b82f6", "#22c55e"),
                padding: $.padding(0.75, 1.5, $.rem),
                borderRadius: "0.5rem"
            }
        }))
    })
```

<!-- tabs:end -->


Se establece por medio del presente documento que **Fluid UI** no debe ser conceptualizada meramente como un instrumento adicional para la manipulación del Modelo de Objetos del Documento (DOM); por el contrario, constituye una solución de ingeniería concebida para suprimir la disparidad existente entre el rendimiento de la ejecución nativa de JavaScript y la ergonomía inherente a las bibliotecas declarativas contemporáneas. Desarrollada bajo el estricto tipado de **TypeScript**, Fluid UI propone un enfoque de alto rendimiento para la construcción de interfaces, eliminando la sobrecarga computacional derivada del DOM Virtual mediante una manipulación directa y eficiente, preservando, de manera concomitante, una sintaxis expresiva y segura.

La arquitectura subyacente se erige sobre dos pilares fundamentales, a saber:

1. **El Patrón Constructor (Builder Pattern):** Mecanismo que faculta la composición de elementos HTML mediante una metodología fluida y encadenable, optimizando la legibilidad y mitigando la verbosidad característica de la invocación `document.createElement`.
2. **Motor de Inferencia de Estilos en Tiempo de Ejecución (CSS-in-JS Runtime):** Un compilador que opera en tiempo de ejecución, transformando objetos JavaScript en Hojas de Estilo en Cascada (CSS) válidas, gestionando de forma automatizada unidades, prefijos y variables, lo cual viabiliza la implementación de un sistema de diseño dinámico.

<!-- row -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-blue-400 mb-3","content":"DOM Wrapper"}}} -->
Abstracción ligera sobre `HTMLElement`. Permite encadenamiento de métodos como jQuery.
<!-- card:end -->
<!-- col -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-blue-400 mb-3","content":"Style Engine"}}} -->
Interpreta objetos JS y funciones helper para producir cadenas CSS válidas, incluyendo prefijos y unidades.
<!-- card:end -->
<!-- col -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-blue-400 mb-3","content":"Math Helpers"}}} -->
Funciones como `clampwcss` calculan interpolaciones lineales basadas en el ancho de ventana.
<!-- card:end -->
<!-- row:end -->

## Interpolación Fluida (Clamp & Lerp)
<!-- chip:MOTOR DE INTERPOLACIÓN -->

El corazón matemático de FluidUI. Mientras que el diseño web tradicional salta bruscamente entre "puntos de ruptura" (breakpoints), FluidUI utiliza **Ecuaciones Lineales Restringidas** para escalar suavemente cualquier propiedad numérica en sincronía con el viewport.

<!-- row -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-pink-400 mb-3","children":[{"i":{"class":"fas fa-stairs mr-2"}}," Enfoque Tradicional"]}}} -->
El valor salta en escalones fijos. El diseño se ve bien en el punto exacto, pero puede romperse en los intermedios.

```chart
{
  "type": "bar",
  "data": {
    "labels": ["Mobile", "Tablet", "Laptop", "Desktop"],
    "datasets": [{
      "data": [25, 50, 75, 100],
      "backgroundColor": "#80808080",
      "borderRadius": 4,
      "barPercentage": 1.0,
      "categoryPercentage": 1.0
    }]
  },
  "options": {
    "legend": { "display": false },
    "scales": {
      "xAxes": [{ "gridLines": { "display": false, "drawBorder": false }, "ticks": { "fontColor": "#94a3b8", "fontSize": 10 } }],
      "yAxes": [{ "display": false, "min": 0, "max": 110 }]
    }
  }
}
```
<!-- card:end -->

<!-- col -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-cyan-400 mb-3","children":[{"i":{"class":"fas fa-wave-square mr-2"}}," Enfoque FluidUI"]}}} -->
El valor fluye linealmente. El diseño es matemáticamente perfecto en cada pixel de ancho de pantalla.

```chart
{
  "type": "line",
  "data": {
    "labels": ["", "", "", "", ""],
    "datasets": [{
      "data": [20, 20, 50, 80, 80],
      "borderColor": "#22d3ee",
      "borderWidth": 3,
      "pointRadius": 0,
      "fill": false,
      "lineTension": 0
    }]
  },
  "options": {
    "legend": { "display": false },
    "scales": { "xAxes": [{ "display": false, "gridLines": { "display": false } }], "yAxes": [{ "display": false, "min": 0, "max": 100 }] },
    "annotation": {
      "annotations": [
        { "type": "line", "mode": "vertical", "scaleID": "x-axis-0", "value": "1", "borderColor": "rgba(255,255,255,0.2)", "borderWidth": 1, "label": { "content": "Min Width", "enabled": true, "position": "bottom", "fontColor": "#94a3b8", "backgroundColor": "rgba(0,0,0,0)", "yAdjust": 10 } },
        { "type": "line", "mode": "vertical", "scaleID": "x-axis-0", "value": "3", "borderColor": "rgba(255,255,255,0.2)", "borderWidth": 1, "label": { "content": "Max Width", "enabled": true, "position": "bottom", "fontColor": "#94a3b8", "backgroundColor": "rgba(0,0,0,0)", "yAdjust": 10 } }
      ]
    }
  }
}
```
<!-- card:end -->
<!-- row:end -->

### La Función: $.clampwcss()

Genera una expresión CSS `clamp()` que calcula la pendiente entre dos puntos y aplica límites de seguridad.

| PARÁMETRO | TIPO | DEFAULT | DESCRIPCIÓN TÉCNICA |
| :--- | :--- | :--- | :--- |
| `minVal` | Number | - | El valor base cuando el viewport es menor o igual a `minWidth`. |
| `maxVal` | Number | - | El valor objetivo cuando el viewport es mayor o igual a `maxWidth`. |
| `unit` | String | "px" | La unidad CSS final (px, rem, %, deg, etc). |
| `minWidth` | Number | 400 | El ancho de ventana donde comienza la interpolación. |
| `maxWidth` | Number | 1100 | El ancho de ventana donde termina la interpolación. |

### Salida CSS Generada y Visualización

```css
/* clampwcss(16, 24) */
font-size: clamp(
  16px,
  calc(16px + (24 - 16) * ((100vw - 400px) / (1100 - 400))),
  24px
);
```

#### Definición lógica

<!-- row -->

<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-blue-400 mb-3","content":"Ancho (ClampW / LerpW)"}}} -->
Interpolación basada en el ancho del viewport (<code>100vw</code>).
```latex
V_w = V_{min} + \Delta V \times \frac{100vw - W_{min}}{W_{max} - W_{min}}
```
<!-- card:end -->

<!-- col -->

<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-blue-400 mb-3","content":"Alto (ClampH / LerpH)"}}} -->
Interpolación basada en la altura del viewport (<code>100vh</code>).
```latex
V_h = V_{min} + \Delta V \times \frac{100vh - H_{min}}{H_{max} - H_{min}}
```
<!-- card:end -->
<!-- row:end -->

<br/>

<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-blue-400 mb-3","content":"Definición de clamp"}}} -->
```latex
{\displaystyle clamp(x)={\begin{cases}V_{min}&{\text{ si }}x\leqslant V_{min}\\x&{\text{ si }}x\in [V_{min},V_{max}]\\V_{max}&{\text{ si }}x\geqslant V_{max}\\\end{cases}}=\max(V_{min},\min(x,V_{max}))}
```
<!-- card:end -->

### Variantes y Poder Oculto

<!-- row -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-blue-400 mb-3","children":["Verticalidad",{"i":{"class":"fas fa-arrows-alt-v float-right"}}]}}} -->
`$.clamphcss()`

Idéntico a clampwcss pero reacciona a la altura de la ventana (100vh). Ideal para secciones "Hero" que no deben cortarse en pantallas apaisadas cortas.
<!-- card:end -->

<!-- col -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-cyan-400 mb-3","children":["Multi-Unidad",{"i":{"class":"fas fa-ruler-combined float-right"}}]}}} -->
`$.clampwcss(1, 2, "rem")`

Soporta rem, em, o incluso grados deg. Útil para rotaciones fluidas o tipografía accesible basada en el root font size.
<!-- card:end -->

<!-- col -->
<!-- card:start:{"title":{"div":{"class":"text-lg font-bold text-purple-400 mb-3","children":["Universal",{"i":{"class":"fas fa-paint-brush float-right"}}]}}} -->
No es solo para texto. Úsalo en:
*   padding / margin
*   border-radius
*   box-shadow (blur radius)
*   gap (Flex/Grid)
<!-- card:end -->
<!-- row:end -->

### Escenario Completo

```javascript
    /** Escenario Completo */
    FluidUI.element("#fluid-text").style($ => ({
        fontSize: $.clampwcss(1, 3, "rem", 300, 1200), /** Fuente escala de 1rem a 3rem entre 300px y 1200px de ancho */
        padding: $.clampwcss(10, 50) /** Padding también crece */
    }))

    FluidUI.element("#fluid-box-geo").style($ => ({
        width: $.clampwcss(50, 25, "%"), /** Ancho: 50% en móvil -> 25% en desktop */
        height: "100px", /** Altura fija para demo */
        borderRadius: $.clampwcss(4, 50, "px") /** Radio de borde que se vuelve más redondo en pantallas grandes */
    }))
```